<div class="pagination-container" *ngIf="paginationState$ | async as state">
  <!-- Page size selector -->
  <div class="page-size-selector" *ngIf="showPageSizeSelector">
    <mat-form-field appearance="outline" class="page-size-field">
      <mat-label>Items per page</mat-label>
      <mat-select [value]="state.pageSize" (selectionChange)="onPageSizeChange($event.value)">
        <mat-option *ngFor="let size of pageSizeOptions" [value]="size">
          {{ size }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Pagination info -->
  <div class="pagination-info">
    <span *ngIf="state.totalItems > 0">
      Showing {{ (state.currentPage - 1) * state.pageSize + 1 }} -
      {{ Math.min(state.currentPage * state.pageSize, state.totalItems) }}
      of {{ state.totalItems }} items
    </span>
    <span *ngIf="state.totalItems === 0">No items found</span>
  </div>

  <!-- Pagination controls -->
  <div class="pagination-controls" *ngIf="state.totalPages > 1">
    <!-- First page button -->
    <button mat-icon-button [disabled]="!state.hasPrevious" (click)="onFirstClick()" matTooltip="First page">
      <mat-icon>first_page</mat-icon>
    </button>

    <!-- Previous page button -->
    <button mat-icon-button [disabled]="!state.hasPrevious" (click)="onPreviousClick()" matTooltip="Previous page">
      <mat-icon>chevron_left</mat-icon>
    </button>

    <!-- Page number buttons -->
    <div class="page-numbers">
      <button *ngFor="let page of pageNumbers$ | async" mat-button [class.current-page]="page === state.currentPage"
        (click)="onPageClick(page)">
        {{ page }}
      </button>
    </div>

    <!-- Next page button -->
    <button mat-icon-button [disabled]="!state.hasNext" (click)="onNextClick()" matTooltip="Next page">
      <mat-icon>chevron_right</mat-icon>
    </button>

    <!-- Last page button -->
    <button mat-icon-button [disabled]="!state.hasNext" (click)="onLastClick()" matTooltip="Last page">
      <mat-icon>last_page</mat-icon>
    </button>
  </div>
</div>